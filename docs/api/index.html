<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Heroku LangChain - v0.2.1</title><meta name="description" content="Documentation for Heroku LangChain"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">Heroku LangChain - v0.2.1</a><div id="tsd-toolbar-links"><a href="https://github.com/julianduque/heroku-langchain">GitHub</a><a href="https://www.npmjs.com/package/heroku-langchain">NPM</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Heroku LangChain - v0.2.1</h1></div><div class="tsd-panel tsd-typography"><h1 id="heroku-mia-langchain-sdk" class="tsd-anchor-link">Heroku Mia LangChain SDK<a href="#heroku-mia-langchain-sdk" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This SDK provides a convenient way to interact with Heroku's AI services, specifically for chat completions, agent functionalities, and text embeddings.</p>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">heroku-langchain</span>
</code><button type="button">Copy</button></pre>

<h2 id="core-classes" class="tsd-anchor-link">Core Classes<a href="#core-classes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This SDK includes three main classes:</p>
<ul>
<li><strong><code>HerokuMia</code></strong>: Chat completions with support for function calling, structured outputs, and streaming</li>
<li><strong><code>HerokuMiaAgent</code></strong>: Autonomous agents with access to Heroku tools and MCP (Model Context Protocol) tools</li>
<li><strong><code>HerokuMiaEmbeddings</code></strong>: Text embeddings for similarity search, RAG applications, and semantic understanding</li>
</ul>
<h2 id="basic-usage" class="tsd-anchor-link">Basic Usage<a href="#basic-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="chat-completions" class="tsd-anchor-link">Chat Completions<a href="#chat-completions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Here's a simple example of how to use the <code>HerokuMia</code> class for chat completions:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HerokuMia</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku-langchain&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HumanMessage</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@langchain/core/messages&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-0">main</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-6">// Ensure INFERENCE_MODEL_ID and INFERENCE_KEY are set in your environment</span><br/><span class="hl-1">  </span><span class="hl-6">// or pass them directly to the constructor:</span><br/><span class="hl-1">  </span><span class="hl-6">// const chat = new HerokuMia({ model: &quot;your-model-id&quot;, apiKey: &quot;your-api-key&quot; });</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">chat</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMia</span><span class="hl-1">({ </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;claude-3-7-sonnet&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">messages</span><span class="hl-1"> = [</span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HumanMessage</span><span class="hl-1">(</span><span class="hl-2">&quot;Hello, how are you doing today?&quot;</span><span class="hl-1">)];</span><br/><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">chat</span><span class="hl-1">.</span><span class="hl-0">invoke</span><span class="hl-1">(</span><span class="hl-4">messages</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;AI Response:&quot;</span><span class="hl-1">, </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// Example of streaming</span><br/><span class="hl-1">    </span><span class="hl-6">// const stream = await chat.stream(messages);</span><br/><span class="hl-1">    </span><span class="hl-6">// for await (const chunk of stream) {</span><br/><span class="hl-1">    </span><span class="hl-6">//   console.log(chunk.content);</span><br/><span class="hl-1">    </span><span class="hl-6">// }</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Error:&quot;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">main</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="text-embeddings" class="tsd-anchor-link">Text Embeddings<a href="#text-embeddings" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Here's how to use the <code>HerokuMiaEmbeddings</code> class for generating text embeddings:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HerokuMiaEmbeddings</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku-langchain&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-0">main</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">embeddings</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaEmbeddings</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;cohere-embed-multilingual&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">// Optional: set API credentials explicitly</span><br/><span class="hl-1">    </span><span class="hl-6">// apiKey: process.env.EMBEDDING_KEY,</span><br/><span class="hl-1">    </span><span class="hl-6">// apiUrl: process.env.EMBEDDING_URL</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">// Generate embedding for a single query</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">queryEmbedding</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedQuery</span><span class="hl-1">(</span><span class="hl-2">&quot;What is Heroku?&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-4">input_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;search_query&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Query embedding dimensions: </span><span class="hl-5">${</span><span class="hl-4">queryEmbedding</span><span class="hl-8">.</span><span class="hl-4">length</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// Generate embeddings for multiple documents</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">documents</span><span class="hl-1"> = [</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;Heroku is a cloud platform as a service (PaaS)&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;It supports multiple programming languages&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;Heroku makes it easy to deploy and scale applications&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    ];</span><br/><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">docEmbeddings</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedDocuments</span><span class="hl-1">(</span><span class="hl-4">documents</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-4">input_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;search_document&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Generated </span><span class="hl-5">${</span><span class="hl-4">docEmbeddings</span><span class="hl-8">.</span><span class="hl-4">length</span><span class="hl-5">}</span><span class="hl-2"> document embeddings`</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Error:&quot;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">main</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h2 id="environment-variables" class="tsd-anchor-link">Environment Variables<a href="#environment-variables" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The SDK can utilize the following environment variables:</p>
<h3 id="chat-completions--agents" class="tsd-anchor-link">Chat Completions &amp; Agents<a href="#chat-completions--agents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>INFERENCE_MODEL_ID</code>: The ID of the inference model to use. This is required if not provided in the constructor.</li>
<li><code>INFERENCE_KEY</code>: Your Heroku Managed Inference and Agents API key. This is required if not provided in the constructor.</li>
<li><code>INFERENCE_URL</code>: The base URL for the Heroku Managed Inference and Agents API.</li>
</ul>
<h3 id="text-embeddings-1" class="tsd-anchor-link">Text Embeddings<a href="#text-embeddings-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>EMBEDDING_MODEL_ID</code>: The ID of the embedding model to use (e.g., &quot;cohere-embed-multilingual&quot;).</li>
<li><code>EMBEDDING_KEY</code>: Your Heroku Embedding API key.</li>
<li><code>EMBEDDING_URL</code>: The base URL for the Heroku Embedding API.</li>
</ul>
<h2 id="advanced-usage" class="tsd-anchor-link">Advanced Usage<a href="#advanced-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="using-tools" class="tsd-anchor-link">Using Tools<a href="#using-tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can bind tools (functions) to the model for more complex interactions.</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HerokuMia</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku-langchain&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HumanMessage</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@langchain/core/messages&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">z</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;zod&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">StructuredTool</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@langchain/core/tools&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Define a simple tool</span><br/><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-9">GetWeatherTool</span><span class="hl-1"> </span><span class="hl-5">extends</span><span class="hl-1"> </span><span class="hl-9">StructuredTool</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">name</span><span class="hl-1"> = </span><span class="hl-2">&quot;get_weather&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">description</span><span class="hl-1"> = </span><span class="hl-2">&quot;Gets the current weather for a given location.&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">schema</span><span class="hl-1"> = </span><span class="hl-4">z</span><span class="hl-1">.</span><span class="hl-0">object</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">location:</span><span class="hl-1"> </span><span class="hl-4">z</span><br/><span class="hl-1">      .</span><span class="hl-0">string</span><span class="hl-1">()</span><br/><span class="hl-1">      .</span><span class="hl-0">describe</span><span class="hl-1">(</span><span class="hl-2">&quot;The city and state, e.g., San Francisco, CA&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-0">_call</span><span class="hl-1">(</span><span class="hl-4">input</span><span class="hl-1">: </span><span class="hl-9">z</span><span class="hl-1">.</span><span class="hl-9">infer</span><span class="hl-1">&lt;</span><span class="hl-5">typeof</span><span class="hl-1"> </span><span class="hl-5">this</span><span class="hl-1">.</span><span class="hl-4">schema</span><span class="hl-1">&gt;) {</span><br/><span class="hl-1">    </span><span class="hl-6">// In a real scenario, you would call a weather API here</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">input</span><span class="hl-1">.</span><span class="hl-4">location</span><span class="hl-1">.</span><span class="hl-0">toLowerCase</span><span class="hl-1">().</span><span class="hl-0">includes</span><span class="hl-1">(</span><span class="hl-2">&quot;san francisco&quot;</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">({ </span><span class="hl-4">weather:</span><span class="hl-1"> </span><span class="hl-2">&quot;sunny&quot;</span><span class="hl-1">, </span><span class="hl-4">temperature:</span><span class="hl-1"> </span><span class="hl-2">&quot;70F&quot;</span><span class="hl-1"> });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">({ </span><span class="hl-4">weather:</span><span class="hl-1"> </span><span class="hl-2">&quot;unknown&quot;</span><span class="hl-1">, </span><span class="hl-4">temperature:</span><span class="hl-1"> </span><span class="hl-2">&quot;unknown&quot;</span><span class="hl-1"> });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-0">main</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">chat</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMia</span><span class="hl-1">({ </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;your-model-id&quot;</span><span class="hl-1"> }).</span><span class="hl-0">bindTools</span><span class="hl-1">([</span><br/><span class="hl-1">    </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">GetWeatherTool</span><span class="hl-1">(),</span><br/><span class="hl-1">  ]);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">messages</span><span class="hl-1"> = [</span><br/><span class="hl-1">    </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HumanMessage</span><span class="hl-1">(</span><span class="hl-2">&quot;What&#39;s the weather like in San Francisco?&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  ];</span><br/><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">chat</span><span class="hl-1">.</span><span class="hl-0">invoke</span><span class="hl-1">(</span><span class="hl-4">messages</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;AI Response:&quot;</span><span class="hl-1">, </span><span class="hl-4">response</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-6">// The response might include a tool_calls array if the model decided to use a tool</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">tool_calls</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">tool_calls</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1"> &gt; </span><span class="hl-10">0</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Tool calls:&quot;</span><span class="hl-1">, </span><span class="hl-4">response</span><span class="hl-1">.</span><span class="hl-4">tool_calls</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-6">// Here you would typically execute the tool and send the result back to the model</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Error:&quot;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">main</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="using-agents" class="tsd-anchor-link">Using Agents<a href="#using-agents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>HerokuMiaAgent</code> class allows for more autonomous interactions with access to Heroku tools and MCP (Model Context Protocol) tools. Here's an example demonstrating agent usage:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HerokuMiaAgent</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku-langchain&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HumanMessage</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@langchain/core/messages&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HerokuAgentToolDefinition</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku-langchain/types&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-0">agentExample</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Running HerokuMiaAgent Example...&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">appName</span><span class="hl-1"> = </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-4">env</span><span class="hl-1">.</span><span class="hl-7">HEROKU_APP_NAME</span><span class="hl-1"> || </span><span class="hl-2">&quot;mia-inference-demo&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">tools</span><span class="hl-1">: </span><span class="hl-9">HerokuAgentToolDefinition</span><span class="hl-1">[] = [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku_tool&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&quot;dyno_run_command&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">runtime_params:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">target_app_name:</span><span class="hl-1"> </span><span class="hl-4">appName</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">tool_params:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">cmd:</span><span class="hl-1"> </span><span class="hl-2">&quot;date&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-2">&quot;Gets the current date and time on the server.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">parameters:</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-2">&quot;object&quot;</span><span class="hl-1">, </span><span class="hl-4">properties:</span><span class="hl-1"> {} },</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  ];</span><br/><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`üì± Using app: </span><span class="hl-5">${</span><span class="hl-4">appName</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;üí° Note: Make sure this app exists and you have access to it!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;   Set HEROKU_APP_NAME environment variable to use a different app.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  );</span><br/><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">agentExecutor</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaAgent</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">tools:</span><span class="hl-1"> </span><span class="hl-4">tools</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;</span><span class="hl-11">\n</span><span class="hl-2">=== Heroku Tool Execution ===&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;</span><span class="hl-11">\n</span><span class="hl-2">Streaming HerokuMiaAgent...&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">stream</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">agentExecutor</span><span class="hl-1">.</span><span class="hl-0">stream</span><span class="hl-1">([</span><br/><span class="hl-1">      </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HumanMessage</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-2">&quot;What time is it on the app server? Please use the available tools to check.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      ),</span><br/><span class="hl-1">    ]);</span><br/><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">toolCalls</span><span class="hl-1">: </span><span class="hl-9">any</span><span class="hl-1">[] = [];</span><br/><br/><span class="hl-1">    </span><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">chunk</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-4">stream</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">chunk</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-4">stdout</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-4">chunk</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-9">string</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-6">// Show tool calls if present in response_metadata</span><br/><span class="hl-1">      </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">chunk</span><span class="hl-1">.</span><span class="hl-4">response_metadata</span><span class="hl-1">?.</span><span class="hl-4">tool_calls</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">toolCall</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-4">chunk</span><span class="hl-1">.</span><span class="hl-4">response_metadata</span><span class="hl-1">.</span><span class="hl-4">tool_calls</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-2">`</span><span class="hl-11">\n</span><span class="hl-2">üîß Agent executed tool: </span><span class="hl-5">${</span><span class="hl-4">toolCall</span><span class="hl-8">.</span><span class="hl-4">name</span><span class="hl-5">}</span><span class="hl-2"> (</span><span class="hl-5">${</span><span class="hl-4">toolCall</span><span class="hl-8">.</span><span class="hl-4">id</span><span class="hl-5">}</span><span class="hl-2">)`</span><span class="hl-1">,</span><br/><span class="hl-1">          );</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-2">&quot;üìã Tool Call Details:&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-0">stringify</span><span class="hl-1">(</span><span class="hl-4">toolCall</span><span class="hl-1">, </span><span class="hl-5">null</span><span class="hl-1">, </span><span class="hl-10">2</span><span class="hl-1">),</span><br/><span class="hl-1">          );</span><br/><span class="hl-1">          </span><span class="hl-4">toolCalls</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-4">toolCall</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-6">// Show tool results if present in additional_kwargs</span><br/><span class="hl-1">      </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">chunk</span><span class="hl-1">.</span><span class="hl-4">additional_kwargs</span><span class="hl-1">?.</span><span class="hl-4">tool_result</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-7">tool_name</span><span class="hl-1">, </span><span class="hl-7">tool_result</span><span class="hl-1">, </span><span class="hl-7">tool_call_id</span><span class="hl-1"> } =</span><br/><span class="hl-1">          </span><span class="hl-4">chunk</span><span class="hl-1">.</span><span class="hl-4">additional_kwargs</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-2">`</span><span class="hl-11">\n</span><span class="hl-2">üõ†Ô∏è Tool &#39;</span><span class="hl-5">${</span><span class="hl-4">tool_name</span><span class="hl-5">}</span><span class="hl-2">&#39; (</span><span class="hl-5">${</span><span class="hl-4">tool_call_id</span><span class="hl-5">}</span><span class="hl-2">) completed with result: </span><span class="hl-5">${</span><span class="hl-4">tool_result</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">,</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-11">\n</span><span class="hl-2">‚úÖ Stream ended. Tool calls executed: </span><span class="hl-5">${</span><span class="hl-4">toolCalls</span><span class="hl-8">.</span><span class="hl-4">length</span><span class="hl-5">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Error:&quot;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">agentExample</span><span class="hl-1">().</span><span class="hl-0">catch</span><span class="hl-1">(</span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-4">error</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h4 id="using-mcp-tools" class="tsd-anchor-link">Using MCP Tools<a href="#using-mcp-tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>You can also use MCP (Model Context Protocol) tools with the agent:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HerokuMiaAgent</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku-langchain&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HumanMessage</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@langchain/core/messages&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HerokuAgentToolDefinition</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku-langchain/types&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-0">mcpExample</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">tools</span><span class="hl-1">: </span><span class="hl-9">HerokuAgentToolDefinition</span><span class="hl-1">[] = [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-2">&quot;mcp&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&quot;mcp-brave/brave_web_search&quot;</span><span class="hl-1">, </span><span class="hl-6">// MCP tool name registered on Heroku MCP Toolkit</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  ];</span><br/><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">agentExecutor</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaAgent</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">tools:</span><span class="hl-1"> </span><span class="hl-4">tools</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">stream</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">agentExecutor</span><span class="hl-1">.</span><span class="hl-0">stream</span><span class="hl-1">([</span><br/><span class="hl-1">    </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HumanMessage</span><span class="hl-1">(</span><span class="hl-2">&quot;What is new in the world of AI?&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  ]);</span><br/><br/><span class="hl-1">  </span><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">chunk</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-4">stream</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">chunk</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-4">stdout</span><span class="hl-1">.</span><span class="hl-0">write</span><span class="hl-1">(</span><span class="hl-4">chunk</span><span class="hl-1">.</span><span class="hl-4">content</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-9">string</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-6">// Handle tool calls and results as shown in the previous example</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Complete working examples are available in the <code>examples/</code> folder, organized by functionality:</p>
<h3 id="chat-completions-herokumia" class="tsd-anchor-link">Chat Completions (<code>HerokuMia</code>)<a href="#chat-completions-herokumia" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong><code>examples/heroku-mia-chat-example.ts</code></strong> - Basic chat completion and streaming usage</li>
<li><strong><code>examples/heroku-mia-chat-custom-tool.ts</code></strong> - Custom weather tool with function calling</li>
<li><strong><code>examples/heroku-mia-chat-structured-output.ts</code></strong> - Structured output with Zod schemas for jokes and text analysis</li>
<li><strong><code>examples/heroku-mia-chat-wikipedia-tool.ts</code></strong> - Advanced tool integration with Wikipedia search</li>
<li><strong><code>examples/heroku-mia-chat-lcel-prompt.ts</code></strong> - Using LangChain Expression Language (LCEL) with prompt templates</li>
<li><strong><code>examples/heroku-mia-runnable-sequence.ts</code></strong> - Building complex chains with LCEL and RunnablePassthrough</li>
<li><strong><code>examples/heroku-mia-langraph.ts</code></strong> - Multi-agent workflow with LangGraph for weather analysis</li>
</ul>
<h3 id="agents-herokumiaagent" class="tsd-anchor-link">Agents (<code>HerokuMiaAgent</code>)<a href="#agents-herokumiaagent" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong><code>examples/heroku-mia-agent-example.ts</code></strong> - Using Heroku tools with agents to execute commands on Heroku apps</li>
<li><strong><code>examples/heroku-mia-agent-example-mcp.ts</code></strong> - Using MCP tools with agents for web search and external services</li>
</ul>
<h3 id="text-embeddings-herokumiaembeddings" class="tsd-anchor-link">Text Embeddings (<code>HerokuMiaEmbeddings</code>)<a href="#text-embeddings-herokumiaembeddings" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong><code>examples/heroku-mia-embeddings-example.ts</code></strong> - Complete embeddings workflow including similarity search and document embedding</li>
</ul>
<h3 id="advanced-integrations" class="tsd-anchor-link">Advanced Integrations<a href="#advanced-integrations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong><code>examples/heroku-mia-langraph-mcp.ts</code></strong> - LangGraph with MCP tools for database interactions</li>
</ul>
<h3 id="running-examples" class="tsd-anchor-link">Running Examples<a href="#running-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To run the examples:</p>
<pre><code class="bash"><span class="hl-6"># Set required environment variables for chat/agents</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">INFERENCE_MODEL_ID</span><span class="hl-1">=</span><span class="hl-2">&quot;claude-3-7-sonnet&quot;</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">INFERENCE_KEY</span><span class="hl-1">=</span><span class="hl-2">&quot;your-heroku-api-key&quot;</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">HEROKU_APP_NAME</span><span class="hl-1">=</span><span class="hl-2">&quot;your-app-name&quot;</span><span class="hl-1">  </span><span class="hl-6"># Optional, defaults to &quot;mia-inference-demo&quot;</span><br/><br/><span class="hl-6"># Set required environment variables for embeddings</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">EMBEDDING_MODEL_ID</span><span class="hl-1">=</span><span class="hl-2">&quot;cohere-embed-multilingual&quot;</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">EMBEDDING_KEY</span><span class="hl-1">=</span><span class="hl-2">&quot;your-embedding-api-key&quot;</span><br/><span class="hl-5">export</span><span class="hl-1"> </span><span class="hl-4">EMBEDDING_URL</span><span class="hl-1">=</span><span class="hl-2">&quot;your-embedding-api-url&quot;</span><br/><br/><span class="hl-6"># Run a chat example</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">tsx</span><span class="hl-1"> </span><span class="hl-2">examples/heroku-mia-chat-example.ts</span><br/><br/><span class="hl-6"># Run a structured output example</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">tsx</span><span class="hl-1"> </span><span class="hl-2">examples/heroku-mia-chat-structured-output.ts</span><br/><br/><span class="hl-6"># Run an agent example</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">tsx</span><span class="hl-1"> </span><span class="hl-2">examples/heroku-mia-agent-example.ts</span><br/><br/><span class="hl-6"># Run the embeddings example</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">tsx</span><span class="hl-1"> </span><span class="hl-2">examples/heroku-mia-embeddings-example.ts</span>
</code><button type="button">Copy</button></pre>

<h2 id="api-documentation" class="tsd-anchor-link">API Documentation<a href="#api-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For more detailed information on the available classes, methods, and types, please refer to the source code and TypeDoc generated documentation (if available).</p>
<ul>
<li><code>HerokuMia</code>: For chat completions with function calling and structured output support.</li>
<li><code>HerokuMiaAgent</code>: For agent-based interactions with Heroku and MCP tools.</li>
<li><code>HerokuMiaEmbeddings</code>: For generating text embeddings and semantic search.</li>
<li><code>types.ts</code>: Contains all relevant TypeScript type definitions.</li>
</ul>
<h2 id="testing" class="tsd-anchor-link">Testing<a href="#testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project uses Node.js's native test runner with TypeScript support. The test suite covers:</p>
<ul>
<li>Common utilities (configuration, message transformation, tool conversion)</li>
<li>Type definitions and interfaces</li>
<li>HerokuMia class functionality</li>
<li>HerokuMiaAgent class functionality</li>
<li>HerokuMiaEmbeddings class functionality</li>
<li>Integration tests</li>
</ul>
<h3 id="running-tests" class="tsd-anchor-link">Running Tests<a href="#running-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-6"># Run all tests once</span><br/><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">test</span><br/><br/><span class="hl-6"># Run tests in watch mode (re-runs on file changes)</span><br/><span class="hl-0">pnpm</span><span class="hl-1"> </span><span class="hl-2">test:watch</span>
</code><button type="button">Copy</button></pre>

<h3 id="test-structure" class="tsd-anchor-link">Test Structure<a href="#test-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The test files are organized as follows:</p>
<ul>
<li><code>test/common.test.ts</code> - Tests for utility functions and error handling</li>
<li><code>test/types.test.ts</code> - Type definition validation tests</li>
<li><code>test/heroku-mia.test.ts</code> - HerokuMia class tests</li>
<li><code>test/heroku-mia-agent.test.ts</code> - HerokuMiaAgent class tests</li>
<li><code>test/integration.test.ts</code> - End-to-end integration tests</li>
</ul>
<p>All tests use environment variable mocking to avoid requiring actual API keys during testing.</p>
<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Apache 2.0</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#heroku-mia-langchain-sdk"><span>Heroku <wbr/>Mia <wbr/>Lang<wbr/>Chain <wbr/>SDK</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#core-classes"><span>Core <wbr/>Classes</span></a></li><li><a href="#basic-usage"><span>Basic <wbr/>Usage</span></a></li><li><ul><li><a href="#chat-completions"><span>Chat <wbr/>Completions</span></a></li><li><a href="#text-embeddings"><span>Text <wbr/>Embeddings</span></a></li></ul></li><li><a href="#environment-variables"><span>Environment <wbr/>Variables</span></a></li><li><ul><li><a href="#chat-completions--agents"><span>Chat <wbr/>Completions &amp; <wbr/>Agents</span></a></li><li><a href="#text-embeddings-1"><span>Text <wbr/>Embeddings</span></a></li></ul></li><li><a href="#advanced-usage"><span>Advanced <wbr/>Usage</span></a></li><li><ul><li><a href="#using-tools"><span>Using <wbr/>Tools</span></a></li><li><a href="#using-agents"><span>Using <wbr/>Agents</span></a></li><li><ul><li><a href="#using-mcp-tools"><span>Using <wbr/>MCP <wbr/>Tools</span></a></li></ul></li></ul></li><li><a href="#examples"><span>Examples</span></a></li><li><ul><li><a href="#chat-completions-herokumia"><span>Chat <wbr/>Completions (<wbr/>Heroku<wbr/>Mia)</span></a></li><li><a href="#agents-herokumiaagent"><span>Agents (<wbr/>Heroku<wbr/>Mia<wbr/>Agent)</span></a></li><li><a href="#text-embeddings-herokumiaembeddings"><span>Text <wbr/>Embeddings (<wbr/>Heroku<wbr/>Mia<wbr/>Embeddings)</span></a></li><li><a href="#advanced-integrations"><span>Advanced <wbr/>Integrations</span></a></li><li><a href="#running-examples"><span>Running <wbr/>Examples</span></a></li></ul></li><li><a href="#api-documentation"><span>API <wbr/>Documentation</span></a></li><li><a href="#testing"><span>Testing</span></a></li><li><ul><li><a href="#running-tests"><span>Running <wbr/>Tests</span></a></li><li><a href="#test-structure"><span>Test <wbr/>Structure</span></a></li></ul></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/julianduque/heroku-langchain">GitHub</a><a href="https://www.npmjs.com/package/heroku-langchain">NPM</a><a href="https://github.com/julianduque/heroku-langchain" class="tsd-nav-link">GitHub</a><a href="https://www.npmjs.com/package/heroku-langchain" class="tsd-nav-link">NPM</a></nav><nav class="tsd-navigation"><a href="modules.html">Heroku LangChain - v0.2.1</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
