<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>HerokuMiaEmbeddings | Heroku LangChain - v0.1.2</title><meta name="description" content="Documentation for Heroku LangChain"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">Heroku LangChain - v0.1.2</a><div id="tsd-toolbar-links"><a href="https://github.com/julianduque/heroku-langchain">GitHub</a><a href="https://www.npmjs.com/package/heroku-langchain">NPM</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">HerokuMiaEmbeddings</a></li></ul><h1>Class HerokuMiaEmbeddings</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p><strong>HerokuMiaEmbeddings</strong> - Heroku Managed Inference Embeddings Integration</p>
<p>A LangChain-compatible embeddings class that interfaces with Heroku's Managed Inference API
for generating text embeddings. This class provides access to various embedding models
hosted on Heroku's infrastructure, supporting both single query embedding and batch
document embedding operations with automatic retry logic and proper error handling.</p>
<p>The class supports different input types (search queries, documents, classification, clustering),
encoding formats, and embedding types to match your specific use case requirements.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example">Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">HerokuMiaEmbeddings</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;heroku-langchain&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Basic usage</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">embeddings</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaEmbeddings</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;cohere-embed-multilingual&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">apiKey:</span><span class="hl-1"> </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-4">env</span><span class="hl-1">.</span><span class="hl-7">EMBEDDING_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">apiUrl:</span><span class="hl-1"> </span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-4">env</span><span class="hl-1">.</span><span class="hl-7">EMBEDDING_URL</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// Embed a single query</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">queryEmbedding</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedQuery</span><span class="hl-1">(</span><span class="hl-2">&quot;What is Heroku?&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Query embedding dimensions:&quot;</span><span class="hl-1">, </span><span class="hl-4">queryEmbedding</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// Embed multiple documents</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">docEmbeddings</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedDocuments</span><span class="hl-1">([</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;Heroku is a cloud platform that enables companies to build, run, and operate applications entirely in the cloud.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;Heroku supports several programming languages including Ruby, Node.js, Python, Java, and more.&quot;</span><br/><span class="hl-1">]);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Document embeddings:&quot;</span><span class="hl-1">, </span><span class="hl-4">docEmbeddings</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-1">Example<a href="#example-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-6">// Advanced usage with specific options</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">embeddings</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaEmbeddings</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;cohere-embed-multilingual&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">maxRetries:</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">timeout:</span><span class="hl-1"> </span><span class="hl-9">30000</span><span class="hl-1">, </span><span class="hl-6">// 30 seconds</span><br/><span class="hl-1">  </span><span class="hl-4">additionalKwargs:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">encoding_format:</span><span class="hl-1"> </span><span class="hl-2">&quot;base64&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">embedding_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;float&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">// Embed with specific input type for search</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">searchEmbedding</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedQuery</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;machine learning algorithms&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  { </span><span class="hl-4">input_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;search_query&quot;</span><span class="hl-1"> }</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-6">// Embed documents for indexing</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">documents</span><span class="hl-1"> = [</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;Introduction to machine learning and its applications&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;Deep learning neural networks explained&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;Natural language processing with transformers&quot;</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">documentEmbeddings</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedDocuments</span><span class="hl-1">(</span><span class="hl-4">documents</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">input_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;search_document&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">truncate:</span><span class="hl-1"> </span><span class="hl-2">&quot;END&quot;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-2">Example<a href="#example-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-6">// Error handling and validation</span><br/><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">embeddings</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaEmbeddings</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;cohere-embed-multilingual&quot;</span><br/><span class="hl-1">  });</span><br/><br/><span class="hl-1">  </span><span class="hl-6">// This will throw an error due to input constraints</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">tooManyDocs</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Array</span><span class="hl-1">(</span><span class="hl-9">100</span><span class="hl-1">).</span><span class="hl-0">fill</span><span class="hl-1">(</span><span class="hl-2">&quot;Sample document&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedDocuments</span><span class="hl-1">(</span><span class="hl-4">tooManyDocs</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1"> </span><span class="hl-5">instanceof</span><span class="hl-1"> </span><span class="hl-8">Error</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Validation error:&quot;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-see"><h4 class="tsd-anchor-link" id="see">See<a href="#see" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li><a href="../interfaces/HerokuMiaEmbeddingsFields.html" class="tsd-kind-interface">HerokuMiaEmbeddingsFields</a> for constructor options</li>
<li><a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a> for runtime call options</li>
<li><a href="https://devcenter.heroku.com/articles/heroku-inference-api-v1-embeddings">Heroku Embeddings API Documentation</a></li>
</ul>
</div></div></section><section class="tsd-panel tsd-hierarchy" data-refl="108"><h4>Hierarchy</h4><ul class="tsd-hierarchy"><li class="tsd-hierarchy-item"><span class="tsd-signature-type">Embeddings</span><ul class="tsd-hierarchy"><li class="tsd-hierarchy-item"><span class="tsd-hierarchy-target">HerokuMiaEmbeddings</span></li></ul></li></ul></section><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:98</li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h5 class="tsd-index-heading uppercase">Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="#model" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>model</span></a>
<a href="#apikey" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>api<wbr/>Key?</span></a>
<a href="#apiurl" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>api<wbr/>Url?</span></a>
<a href="#maxretries" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>max<wbr/>Retries</span></a>
<a href="#timeout" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>timeout?</span></a>
<a href="#additionalkwargs" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>additional<wbr/>Kwargs</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Accessors</h3><div class="tsd-index-list"><a href="#lc_name" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Accessor"><use href="../assets/icons.svg#icon-262144"></use></svg><span>lc_<wbr/>name</span></a>
<a href="#lc_serializable" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Accessor"><use href="../assets/icons.svg#icon-262144"></use></svg><span>lc_<wbr/>serializable</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="#invocationparams" class="tsd-index-link tsd-is-private"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>invocation<wbr/>Params</span></a>
<a href="#validateinput" class="tsd-index-link tsd-is-private"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>validate<wbr/>Input</span></a>
<a href="#makerequest" class="tsd-index-link tsd-is-private"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>make<wbr/>Request</span></a>
<a href="#embedquery" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>embed<wbr/>Query</span></a>
<a href="#embeddocuments" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>embed<wbr/>Documents</span></a>
<a href="#_embeddocuments" class="tsd-index-link tsd-is-private"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>_<wbr/>embed<wbr/>Documents</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Constructors</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="constructor"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="constructorherokumiaembeddings"><span class="tsd-signature-keyword">new</span> <span class="tsd-kind-constructor-signature">HerokuMiaEmbeddings</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">fields</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/HerokuMiaEmbeddingsFields.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsFields</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="" class="tsd-signature-type tsd-kind-class">HerokuMiaEmbeddings</a><a href="#constructorherokumiaembeddings" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Creates a new HerokuMiaEmbeddings instance.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">fields</span>: <a href="../interfaces/HerokuMiaEmbeddingsFields.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsFields</a></span><div class="tsd-comment tsd-typography"><p>Configuration options for the Heroku embeddings model</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="" class="tsd-signature-type tsd-kind-class">HerokuMiaEmbeddings</a></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws">Throws<a href="#throws" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>When model ID is not provided and EMBEDDING_MODEL_ID environment variable is not set</p>
</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-3">Example<a href="#example-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">embeddings</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaEmbeddings</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;cohere-embed-multilingual&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">apiKey:</span><span class="hl-1"> </span><span class="hl-2">&quot;your-embedding-api-key&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">apiUrl:</span><span class="hl-1"> </span><span class="hl-2">&quot;https://us.inference.heroku.com&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">maxRetries:</span><span class="hl-1"> </span><span class="hl-9">3</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">timeout:</span><span class="hl-1"> </span><span class="hl-9">30000</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><p>Overrides Embeddings.constructor</p><ul><li>Defined in heroku-mia-embeddings.ts:124</li></ul></aside></div></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Properties</h2></summary><section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="model"><code class="tsd-tag">Protected</code><span>model</span><a href="#model" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">model</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:100</li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="apikey"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Optional</code><span>api<wbr/>Key</span><a href="#apikey" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">apiKey</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:101</li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="apiurl"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Optional</code><span>api<wbr/>Url</span><a href="#apiurl" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">apiUrl</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:102</li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="maxretries"><code class="tsd-tag">Protected</code><span>max<wbr/>Retries</span><a href="#maxretries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">maxRetries</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:103</li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="timeout"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Optional</code><span>timeout</span><a href="#timeout" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">timeout</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:104</li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="additionalkwargs"><code class="tsd-tag">Protected</code><span>additional<wbr/>Kwargs</span><a href="#additionalkwargs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">additionalKwargs</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:105</li></ul></aside></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Accessors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Accessors</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="lc_name"><span>lc_<wbr/>name</span><a href="#lc_name" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li><div class="tsd-signature" id="lc_namelc_name"><span class="tsd-signature-keyword">get</span> <span class="tsd-kind-get-signature">lc_name</span><span class="tsd-signature-symbol">()</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Get the model name for identification.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span></h4><p>The string &quot;HerokuMiaEmbeddings&quot;</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:150</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="lc_serializable"><span>lc_<wbr/>serializable</span><a href="#lc_serializable" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li><div class="tsd-signature" id="lc_serializablelc_serializable"><span class="tsd-signature-keyword">get</span> <span class="tsd-kind-get-signature">lc_serializable</span><span class="tsd-signature-symbol">()</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">boolean</span></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Get additional parameters for serialization.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">boolean</span></h4><p>true to indicate this class is serializable</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:158</li></ul></aside></div></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Methods</h2></summary><section><section class="tsd-panel tsd-member tsd-is-private"><h3 class="tsd-anchor-link" id="invocationparams"><code class="tsd-tag">Private</code><span>invocation<wbr/>Params</span><a href="#invocationparams" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-private"><li class=""><div class="tsd-signature tsd-anchor-link" id="invocationparams-1"><span class="tsd-kind-call-signature">invocationParams</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/HerokuEmbeddingsRequest.html" class="tsd-signature-type tsd-kind-interface">HerokuEmbeddingsRequest</a><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;input&quot;</span><span class="tsd-signature-symbol">&gt;</span><a href="#invocationparams-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Internal</code><div class="tsd-comment tsd-typography"><p>Get the parameters used to invoke the embeddings model.</p>
<p>This method combines constructor parameters with runtime options to create
the final request parameters for the Heroku Embeddings API.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a></span><div class="tsd-comment tsd-typography"><p>Optional runtime parameters that override constructor defaults</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/HerokuEmbeddingsRequest.html" class="tsd-signature-type tsd-kind-interface">HerokuEmbeddingsRequest</a><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;input&quot;</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Combined parameters for the embeddings API request (excluding input)</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:173</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-private"><h3 class="tsd-anchor-link" id="validateinput"><code class="tsd-tag">Private</code><span>validate<wbr/>Input</span><a href="#validateinput" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-private"><li class=""><div class="tsd-signature tsd-anchor-link" id="validateinput-1"><span class="tsd-kind-call-signature">validateInput</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">texts</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">void</span><a href="#validateinput-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Internal</code><div class="tsd-comment tsd-typography"><p>Validates input constraints for Heroku embeddings API.</p>
<p>The Heroku embeddings API has specific limitations that this method enforces:</p>
<ul>
<li>Maximum 96 strings per request</li>
<li>Maximum 2048 characters per string</li>
</ul>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">texts</span>: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>Array of strings to validate</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-1">Throws<a href="#throws-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>When input exceeds API constraints</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:215</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-private"><h3 class="tsd-anchor-link" id="makerequest"><code class="tsd-tag">Private</code><span>make<wbr/>Request</span><a href="#makerequest" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-private"><li class=""><div class="tsd-signature tsd-anchor-link" id="makerequest-1"><span class="tsd-kind-call-signature">makeRequest</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">requestPayload</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/HerokuEmbeddingsRequest.html" class="tsd-signature-type tsd-kind-interface">HerokuEmbeddingsRequest</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/HerokuEmbeddingsResponse.html" class="tsd-signature-type tsd-kind-interface">HerokuEmbeddingsResponse</a><span class="tsd-signature-symbol">&gt;</span><a href="#makerequest-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Internal</code><div class="tsd-comment tsd-typography"><p>Makes a request to the Heroku embeddings API with retry logic.</p>
<p>This method handles the actual HTTP request to the Heroku API, including:</p>
<ul>
<li>Automatic retries for transient failures (5xx errors, 429 rate limits)</li>
<li>Exponential backoff with jitter</li>
<li>Proper error handling and reporting</li>
<li>Timeout management</li>
</ul>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">requestPayload</span>: <a href="../interfaces/HerokuEmbeddingsRequest.html" class="tsd-signature-type tsd-kind-interface">HerokuEmbeddingsRequest</a></span><div class="tsd-comment tsd-typography"><p>The complete request payload for the embeddings API</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/HerokuEmbeddingsResponse.html" class="tsd-signature-type tsd-kind-interface">HerokuEmbeddingsResponse</a><span class="tsd-signature-symbol">&gt;</span></h4><p>Promise resolving to the embeddings API response</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-2">Throws<a href="#throws-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>For API errors or network failures</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:246</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="embedquery"><span>embed<wbr/>Query</span><a href="#embedquery" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="embedquery-1"><span class="tsd-kind-call-signature">embedQuery</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">text</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#embedquery-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Embeds a single text query.</p>
<p>This method is optimized for embedding search queries and single pieces of text.
It automatically sets the input_type to &quot;search_query&quot; unless overridden in options.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">text</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>The text to embed</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a></span><div class="tsd-comment tsd-typography"><p>Optional call-time parameters to customize the embedding request</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Promise resolving to an array of numbers representing the embedding vector</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-4">Example<a href="#example-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">embeddings</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaEmbeddings</span><span class="hl-1">({ </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;cohere-embed-multilingual&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-6">// Basic query embedding</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">queryVector</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedQuery</span><span class="hl-1">(</span><span class="hl-2">&quot;machine learning algorithms&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Embedding dimensions:&quot;</span><span class="hl-1">, </span><span class="hl-4">queryVector</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// With custom options</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">customQueryVector</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedQuery</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;natural language processing&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-4">input_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;classification&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">encoding_format:</span><span class="hl-1"> </span><span class="hl-2">&quot;base64&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-3">Throws<a href="#throws-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>When the text exceeds 2048 characters</p>
</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-4">Throws<a href="#throws-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>For API-related errors</p>
</div></div><aside class="tsd-sources"><p>Overrides Embeddings.embedQuery</p><ul><li>Defined in heroku-mia-embeddings.ts:364</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="embeddocuments"><span>embed<wbr/>Documents</span><a href="#embeddocuments" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="embeddocuments-1"><span class="tsd-kind-call-signature">embedDocuments</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">documents</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#embeddocuments-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Embeds multiple documents.</p>
<p>This method is optimized for embedding multiple documents for indexing or similarity search.
It automatically sets the input_type to &quot;search_document&quot; unless overridden in options.
Input validation ensures compliance with API constraints before making any network calls.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">documents</span>: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>Array of text documents to embed (max 96 documents, 2048 chars each)</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a></span><div class="tsd-comment tsd-typography"><p>Optional call-time parameters to customize the embedding request</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Promise resolving to an array of embedding vectors, one per input document</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-5">Example<a href="#example-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">embeddings</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">HerokuMiaEmbeddings</span><span class="hl-1">({ </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-2">&quot;openai-text-embedding-3-large&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">documents</span><span class="hl-1"> = [</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;Heroku is a cloud platform for building and running applications.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;LangChain is a framework for developing applications powered by language models.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;Vector databases enable semantic search and similarity matching.&quot;</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-6">// Basic document embedding</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">documentVectors</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedDocuments</span><span class="hl-1">(</span><span class="hl-4">documents</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Generated </span><span class="hl-5">${</span><span class="hl-4">documentVectors</span><span class="hl-11">.</span><span class="hl-4">length</span><span class="hl-5">}</span><span class="hl-2"> embeddings`</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// With custom options for clustering</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-7">clusteringVectors</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">embeddings</span><span class="hl-1">.</span><span class="hl-0">embedDocuments</span><span class="hl-1">(</span><span class="hl-4">documents</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">input_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;clustering&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">embedding_type:</span><span class="hl-1"> </span><span class="hl-2">&quot;int8&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">truncate:</span><span class="hl-1"> </span><span class="hl-2">&quot;START&quot;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-5">Throws<a href="#throws-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>When input exceeds API constraints (&gt;96 documents or &gt;2048 chars per document)</p>
</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-6">Throws<a href="#throws-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>For API-related errors</p>
</div></div><aside class="tsd-sources"><p>Overrides Embeddings.embedDocuments</p><ul><li>Defined in heroku-mia-embeddings.ts:411</li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-private"><h3 class="tsd-anchor-link" id="_embeddocuments"><code class="tsd-tag">Private</code><span>_<wbr/>embed<wbr/>Documents</span><a href="#_embeddocuments" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-private"><li class=""><div class="tsd-signature tsd-anchor-link" id="_embeddocuments-1"><span class="tsd-kind-call-signature">_embedDocuments</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">documents</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#_embeddocuments-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><code class="tsd-tag">Internal</code><div class="tsd-comment tsd-typography"><p>Internal method to embed documents.</p>
<p>This method performs the actual embedding work after validation has been completed
in the public embedDocuments method. It constructs the API request and processes the response.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">documents</span>: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>Array of validated text documents to embed</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/HerokuMiaEmbeddingsCallOptions.html" class="tsd-signature-type tsd-kind-interface">HerokuMiaEmbeddingsCallOptions</a></span><div class="tsd-comment tsd-typography"><p>Optional call-time parameters</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Promise resolving to an array of embedding vectors</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in heroku-mia-embeddings.ts:436</li></ul></aside></div></li></ul></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Constructors</summary><div><a href="#constructor"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Properties</summary><div><a href="#model" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>model</span></a><a href="#apikey" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>api<wbr/>Key</span></a><a href="#apiurl" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>api<wbr/>Url</span></a><a href="#maxretries" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>max<wbr/>Retries</span></a><a href="#timeout" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>timeout</span></a><a href="#additionalkwargs" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>additional<wbr/>Kwargs</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Accessors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Accessors</summary><div><a href="#lc_name"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Accessor"><use href="../assets/icons.svg#icon-262144"></use></svg><span>lc_<wbr/>name</span></a><a href="#lc_serializable"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Accessor"><use href="../assets/icons.svg#icon-262144"></use></svg><span>lc_<wbr/>serializable</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Methods</summary><div><a href="#invocationparams" class="tsd-is-private"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>invocation<wbr/>Params</span></a><a href="#validateinput" class="tsd-is-private"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>validate<wbr/>Input</span></a><a href="#makerequest" class="tsd-is-private"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>make<wbr/>Request</span></a><a href="#embedquery"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>embed<wbr/>Query</span></a><a href="#embeddocuments"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>embed<wbr/>Documents</span></a><a href="#_embeddocuments" class="tsd-is-private"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>_<wbr/>embed<wbr/>Documents</span></a></div></details></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/julianduque/heroku-langchain">GitHub</a><a href="https://www.npmjs.com/package/heroku-langchain">NPM</a><a href="https://github.com/julianduque/heroku-langchain" class="tsd-nav-link">GitHub</a><a href="https://www.npmjs.com/package/heroku-langchain" class="tsd-nav-link">NPM</a></nav><nav class="tsd-navigation"><a href="../modules.html">Heroku LangChain - v0.1.2</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
